<div class="container mt-4">
  <h1 style="width: 50%; margin: 0 auto; background-color: bisque">
    Contact List
  </h1>

  <!-- Toggle Add Contact Form -->
  <button
    class="btn btn-success mb-3 mt-2"
    style="display: block; margin: 0 auto"
    (click)="toggleAddContactForm()"
  >
    {{ showAddContactForm ? "Close" : "Add New Contact" }}
  </button>

  <!-- Add Contact Form (visible only when showAddContactForm is true) -->
  <add-contact
    *ngIf="showAddContactForm"
    (contactAdded)="addContact($event)"
  ></add-contact>

  <!-- Contact List -->
  <ul class="list-group mt-3 w-50" style="margin: 0 auto">
    <div *ngIf="selectedContact" class="contact-details">
      <h2>Contact Details</h2>
      <p><strong>First Name:</strong> {{ selectedContact.firstName }}</p>
      <p><strong>Last Name:</strong> {{ selectedContact.lastName }}</p>
      <p><strong>Address:</strong> {{ selectedContact.address }}</p>
      <p><strong>Phone Number:</strong> {{ selectedContact.phoneNumber }}</p>

      <div class="action-buttons mt-3">
        <button class="btn btn-danger">Delete</button>
        <button class="btn btn-primary" (click)="enableUpdateContact()">Update</button>
      </div>
    </div>

    <div *ngIf="isUpdateMode && selectedContact" class="update-contact-form">
      <h3>Update Contact</h3>
      <form (ngSubmit)="updateContact()">
        <div class="form-group">
          <label for="firstName">First Name:</label>
          <input
            type="text"
            id="firstName"
            [(ngModel)]="selectedContact.firstName"
            name="firstName"
            class="form-control"
          />
        </div>
        <div class="form-group">
          <label for="lastName">Last Name:</label>
          <input
            type="text"
            id="lastName"
            [(ngModel)]="selectedContact.lastName"
            name="lastName"
            class="form-control"
          />
        </div>
        <div class="form-group">
          <label for="address">Address:</label>
          <input
            type="text"
            id="address"
            [(ngModel)]="selectedContact.address"
            name="address"
            class="form-control"
          />
        </div>
        <div class="form-group">
          <label for="phoneNumber">Phone Number:</label>
          <input
            type="text"
            id="phoneNumber"
            [(ngModel)]="selectedContact.phoneNumber"
            name="phoneNumber"
            class="form-control"
          />
        </div>
        <button type="submit" class="btn btn-primary mt-3">Save</button>
        <button type="button" class="btn btn-secondary mt-3" (click)="cancelUpdate()">Cancel</button>
      </form>
    </div>

    <li
      *ngFor="let contact of contacts"
      class="list-group-item mb-3"
      (click)="selectContact(contact)"
      [class.selected]="selectedContact === contact"
      [style.cursor]="'pointer'"
    >
      <strong>{{ contact.firstName }} {{ contact.lastName }}</strong><br />
      Address: {{ contact.address }}<br />
      Phone: {{ contact.phoneNumber }}
    </li>
  </ul>
</div>
